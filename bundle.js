!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){return e.split("?")[1]?e.split("?")[1].split("&").reduce(function(e,t){var n=t.split("=");return e[decodeURIComponent(n[0]).trim()]=decodeURIComponent(n[1]).trim(),e},{}):{q:"starcraft",offset:0,limit:10}}var a=n(2),s=n(4),o=n(1),d=n(3),l=i(d),c=document.getElementById("stream-list"),u=document.createDocumentFragment();(0,a.listener)(function(e){var t=e.detail,n=t.type,i=t.data;switch(n){case o.BEFORE_REQUEST:(0,s.emptyNode)(c);var a=new s.el("div");a.node.setAttribute("class","stream-loading-container"),a.node.innerText="Loading...",u.appendChild(a.node),c.appendChild(u);break;case o.INITIAL_REQUEST_ACTION:(0,s.emptyNode)(c),u.appendChild((0,s.streamTopContainer)(r(i._links.self),i).node),i.streams.map(function(e){u.appendChild((0,s.streamItem)(e).node)}),c.appendChild(u);break;case o.HISTORY_UPDATE:window.history.pushState(i.state,i.title,i.url),p()}}),window.addEventListener("popstate",function(){p()});var p=function(){var e=r(window.location.href),t=e.q,n=e.offset,i=e.limit;return(0,l["default"])({url:"https://api.twitch.tv/kraken/search/streams?q="+(t||"starcraft")+"&offset="+(n||0)+"&limit="+(i||10),type:"GET",before:function(){(0,a.dispatch)({type:o.BEFORE_REQUEST})},success:function(e){(0,a.dispatch)({type:o.INITIAL_REQUEST_ACTION,data:JSON.parse(e.responseText)})}})};p()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BEFORE_REQUEST="BEFORE_REQUEST",t.INITIAL_REQUEST_ACTION="INITIAL_REQUEST_ACTION",t.HISTORY_UPDATE="HISTORY_UPDATE"},function(e,t){"use strict";function n(e){return window.dispatchEvent(new CustomEvent("twitch-app:update",{detail:e}))}function i(e){return window.addEventListener("twitch-app:update",e,!1)}Object.defineProperty(t,"__esModule",{value:!0}),t.dispatch=n,t.listener=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=new XMLHttpRequest;t.open(e.type,e.url,!0),t.setRequestHeader("json","application/json; charset=UTF-8"),e.before&&e.before(),t.onload=function(){t.status>=200&&t.status<400&&e.success&&e.success(t)},t.onreadystatechange=function(){4===t.readyState&&t.status>=400&&e.error&&e.error(t)},t.onerror=function(){throw new Error("There was a problem with the request")},t.send(e.data)}},function(e,t,n){"use strict";function i(e){return this.node=document.createElement(e),this.events=[],this}function r(e){for(;e.firstChild;)e.firstChild.remove?e.firstChild.remove():e.removeChild(e.firstChild)}function a(e,t){var n=parseInt(e.limit,10),r=parseInt(e.offset,10),a=t._total,s=Math.ceil(a/n),l=new i("div");l.node.setAttribute("class","stream-results-count"),l.node.innerText="Total results: "+t._total;var c=new i("div");c.node.setAttribute("class","stream-pagination");var u=new i("a");u.node.setAttribute("class","stream-pagination-left-arrow"),u.on("click",function(t){(0,o.dispatch)({type:d.HISTORY_UPDATE,data:{state:e,title:e.q,url:"/twitch/?q="+e.q+"&offset="+(0===r?Math.floor(a/n)*n:r-n)+"&limit="+e.limit}})});var p=new i("div");p.node.setAttribute("class","stream-pagination-text"),p.node.innerText=Math.ceil(Math.min(a,r)/n)+1+" / "+s;var m=new i("a");m.node.setAttribute("class","stream-pagination-right-arrow"),m.on("click",function(t){(0,o.dispatch)({type:d.HISTORY_UPDATE,data:{state:e,title:e.q,url:"/twitch/?q="+e.q+"&offset="+(parseInt(a/(r+n),10)>0?r+n:0)+"&limit="+e.limit}})}),c.node.appendChild(u.node),c.node.appendChild(p.node),c.node.appendChild(m.node);var h=new i("div");return h.node.setAttribute("class","stream-top-container"),h.node.appendChild(l.node),h.node.appendChild(c.node),h}function s(e){var t=new i("div");t.node.setAttribute("class","stream-item-container");var n=new i("div");n.node.setAttribute("class","stream-item-details-container");var r=new i("div");r.node.innerText=e.channel.name+" - "+e.viewers+" viewers";var a=new i("img");a.node.setAttribute("class","stream-item-image-container"),a.node.setAttribute("src",""+e.preview.medium);var s=new i("h2");s.node.setAttribute("class","stream-item-details-heading"),s.node.innerHTML='<a href="'+e.channel.url+'" target="_blank">'+e.channel.name+"</a>";var o=new i("p");return o.node.setAttribute("class","stream-item-details-status"),o.node.innerText=e.channel.status,n.node.appendChild(s.node),n.node.appendChild(r.node),n.node.appendChild(o.node),t.node.appendChild(a.node),t.node.appendChild(n.node),t}Object.defineProperty(t,"__esModule",{value:!0}),t.el=i,t.emptyNode=r,t.streamTopContainer=a,t.streamItem=s;var o=n(2),d=n(1);i.prototype.on=function(e,t){this.events.push({name:e,listener:t}),this.node.addEventListener(e,t,!1)},i.prototype.remove=function(){var e=this;this.events.map(function(t){return e.node.removeEventListener(t.event_type,t.listener,!1)}),this.node.parentElement&&this.node.parentElement.removeChild(this.node)}}]);